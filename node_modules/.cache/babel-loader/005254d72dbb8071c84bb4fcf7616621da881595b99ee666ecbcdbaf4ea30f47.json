{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\FaceIDVLU-FE\\\\src\\\\components\\\\common\\\\ShiftCard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { descriptionToTime } from '../../services/shiftUtils';\nimport ShiftContextMenu from './ShiftContextMenu';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst noteToStatusText = {\n  'success': 'Đã đăng ký',\n  'leave_of_absence': 'Ca muốn nghỉ',\n  'waiting': 'Ca muốn đổi',\n  'leave_approval': 'Được duyệt nghỉ phép'\n};\nconst ShiftCard = ({\n  day,\n  shifts,\n  fullDate,\n  onRightClick\n}) => {\n  _s();\n  const [contextMenuPosition, setContextMenuPosition] = useState(null);\n  const [selectedShift, setSelectedShift] = useState(null);\n  const [hoveredShift, setHoveredShift] = useState(null);\n  const [activeContextMenu, setActiveContextMenu] = useState(null);\n  const handleRightClick = (e, shift) => {\n    e.preventDefault();\n    if (activeContextMenu === shift.id) {\n      setActiveContextMenu(null);\n    } else {\n      setActiveContextMenu(shift.id);\n      setSelectedShift({\n        ...shift,\n        day,\n        fullDate\n      });\n      setContextMenuPosition({\n        x: e.clientX,\n        y: e.clientY\n      });\n    }\n  };\n  const handleContextMenuAction = (shift, actionType) => {\n    onRightClick(shift);\n    setActiveContextMenu(null);\n  };\n  useEffect(() => {\n    const handleClickOutside = e => {\n      if (e.target.closest('.context-menu') === null) {\n        setActiveContextMenu(null);\n      }\n    };\n    document.addEventListener('click', handleClickOutside);\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-green-100 shadow-lg rounded-lg p-4 border border-gray-200 flex flex-col relative min-h-[200px] hover:bg-gray-50 transition-all duration-300\",\n    onClick: () => setActiveContextMenu(null),\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-semibold text-gray-800 mb-4 truncate\",\n      children: [\"Ng\\xE0y \", day]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow space-y-3 overflow-hidden\",\n      children: shifts.map(shift => {\n        const isRegistered = shift.registered;\n        const statusText = isRegistered && shift.note ? noteToStatusText[shift.note] : null;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `mb-3 cursor-pointer ${hoveredShift === shift.id ? 'bg-gray-100' : ''}`,\n          onContextMenu: e => handleRightClick(e, shift),\n          onMouseEnter: () => setHoveredShift(shift.id),\n          onMouseLeave: () => setHoveredShift(null),\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 truncate\",\n            children: [\"Ca tr\\u1EF1c: \", descriptionToTime[shift.description] || \"Không có thông tin\", isRegistered && statusText && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `font-bold italic \n                      ${statusText === 'Đã đăng ký' ? 'text-green-600' : statusText === 'Ca muốn nghỉ' ? 'text-blue-600' : statusText === 'Ca muốn đổi' ? 'text-yellow-600' : statusText === 'Được duyệt nghỉ phép' ? 'text-red-600' : 'text-gray-600'}`,\n              children: [\" (\", statusText, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this)\n        }, shift.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), activeContextMenu && selectedShift && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed context-menu z-50\",\n      style: {\n        top: contextMenuPosition.y,\n        left: contextMenuPosition.x,\n        zIndex: 9999\n      },\n      children: /*#__PURE__*/_jsxDEV(ShiftContextMenu, {\n        shift: {\n          ...selectedShift,\n          date: fullDate\n        },\n        position: contextMenuPosition,\n        onRegister: shift => handleContextMenuAction(shift, 'register'),\n        onDelete: shift => handleContextMenuAction(shift, 'delete'),\n        onClose: () => setActiveContextMenu(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(ShiftCard, \"Bg5QrBaUbXmLUGGsoorydMGXMSE=\");\n_c = ShiftCard;\nexport default ShiftCard;\nvar _c;\n$RefreshReg$(_c, \"ShiftCard\");","map":{"version":3,"names":["React","useState","useEffect","descriptionToTime","ShiftContextMenu","toast","ToastContainer","jsxDEV","_jsxDEV","noteToStatusText","ShiftCard","day","shifts","fullDate","onRightClick","_s","contextMenuPosition","setContextMenuPosition","selectedShift","setSelectedShift","hoveredShift","setHoveredShift","activeContextMenu","setActiveContextMenu","handleRightClick","e","shift","preventDefault","id","x","clientX","y","clientY","handleContextMenuAction","actionType","handleClickOutside","target","closest","document","addEventListener","removeEventListener","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","map","isRegistered","registered","statusText","note","onContextMenu","onMouseEnter","onMouseLeave","description","style","top","left","zIndex","date","position","onRegister","onDelete","onClose","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Desktop/FaceIDVLU-FE/src/components/common/ShiftCard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { descriptionToTime } from '../../services/shiftUtils';\r\nimport ShiftContextMenu from './ShiftContextMenu';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst noteToStatusText = {\r\n  'success': 'Đã đăng ký',\r\n  'leave_of_absence': 'Ca muốn nghỉ',\r\n  'waiting': 'Ca muốn đổi',\r\n  'leave_approval': 'Được duyệt nghỉ phép'\r\n};\r\n\r\nconst ShiftCard = ({ day, shifts, fullDate, onRightClick }) => {\r\n  const [contextMenuPosition, setContextMenuPosition] = useState(null);\r\n  const [selectedShift, setSelectedShift] = useState(null);\r\n  const [hoveredShift, setHoveredShift] = useState(null);\r\n  const [activeContextMenu, setActiveContextMenu] = useState(null);\r\n\r\n  const handleRightClick = (e, shift) => {\r\n    e.preventDefault();\r\n    if (activeContextMenu === shift.id) {\r\n      setActiveContextMenu(null);\r\n    } else {\r\n      setActiveContextMenu(shift.id);\r\n      setSelectedShift({...shift, day, fullDate});\r\n      setContextMenuPosition({ x: e.clientX, y: e.clientY });\r\n    }\r\n  };\r\n\r\n  const handleContextMenuAction = (shift, actionType) => {\r\n    onRightClick(shift);\r\n    setActiveContextMenu(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (e.target.closest('.context-menu') === null) {\r\n        setActiveContextMenu(null); \r\n      }\r\n    };\r\n\r\n    document.addEventListener('click', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      className=\"bg-green-100 shadow-lg rounded-lg p-4 border border-gray-200 flex flex-col relative min-h-[200px] hover:bg-gray-50 transition-all duration-300\"\r\n      onClick={() => setActiveContextMenu(null)}\r\n    >\r\n      <h3 className=\"text-lg font-semibold text-gray-800 mb-4 truncate\">Ngày {day}</h3>\r\n\r\n      <div className=\"flex-grow space-y-3 overflow-hidden\">\r\n        {shifts.map((shift) => {\r\n          const isRegistered = shift.registered;\r\n          const statusText = isRegistered && shift.note ? noteToStatusText[shift.note] : null;\r\n          \r\n          return (\r\n            <div\r\n              key={shift.id}\r\n              className={`mb-3 cursor-pointer ${hoveredShift === shift.id ? 'bg-gray-100' : ''}`}\r\n              onContextMenu={(e) => handleRightClick(e, shift)}\r\n              onMouseEnter={() => setHoveredShift(shift.id)}\r\n              onMouseLeave={() => setHoveredShift(null)}\r\n            >\r\n              <p className=\"text-sm text-gray-600 truncate\">\r\n                Ca trực: {descriptionToTime[shift.description] || \"Không có thông tin\"}\r\n                {isRegistered && statusText && (\r\n                  <span \r\n                    className={`font-bold italic \r\n                      ${statusText === 'Đã đăng ký' ? 'text-green-600' : \r\n                        statusText === 'Ca muốn nghỉ' ? 'text-blue-600' : \r\n                        statusText === 'Ca muốn đổi' ? 'text-yellow-600' : \r\n                        statusText === 'Được duyệt nghỉ phép' ? 'text-red-600' : 'text-gray-600'\r\n                      }`}\r\n                  > ({statusText})</span>\r\n                )}\r\n              </p>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {activeContextMenu && selectedShift && (\r\n        <div\r\n          className=\"fixed context-menu z-50\" \r\n          style={{\r\n            top: contextMenuPosition.y,\r\n            left: contextMenuPosition.x,\r\n            zIndex: 9999, \r\n          }}\r\n        >\r\n          <ShiftContextMenu\r\n            shift={{...selectedShift, date: fullDate}}\r\n            position={contextMenuPosition}\r\n            onRegister={(shift) => handleContextMenuAction(shift, 'register')}\r\n            onDelete={(shift) => handleContextMenuAction(shift, 'delete')}\r\n            onClose={() => setActiveContextMenu(null)} \r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShiftCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}